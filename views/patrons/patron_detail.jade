extends ../layout

block content

	h1 Patron: #{model.first_name} #{model.last_name}

	form(action='/patrons/' + model.id + '?_method=PUT' method='post' class='form-update')
		p
			label(for='first_name') First Name
			input#first_name(type='text', value='#{model.first_name}' name="first_name")
		p
			label(for='last_name') Last Name
			input#last_name(type='text', value='#{model.last_name}' name="last_name")
		p
			label(for='address')  Address
			input#address(type='text', value='#{model.address}' name="address")
		p
			label(for='email') Email
			input#email(type='text', value='#{model.email}' name="email")
		p
			label(for='library_id') Library ID
			input#library_id(type='text', value='#{model.library_id}' name="library_id")
		p
			label(for='zip_code') Zip Code
			input#zip_code(type='text', value='#{model.zip_code}' name="zip_code")
		p
			input(type='submit', value='Update')

		h2 Loan History
		table
			thead
				tr
					th Book
					th Patron 
					th Loaned on
					th Return by 
					th Returned on
					th Action
			tbody
				each val, index in model.Loans
					tr
						td
							a(href=`/books/${model.Loans[index].Book.id}`) #{model.Loans[index].Book.title}
						td
							a(href=`/patrons/${model.id}`) #{`${model.first_name} ${model.last_name}`}
						td #{model.Loans[index].loaned_on}
						td #{model.Loans[index].return_by}
						td
						td
							a.button(href='return_book.html') Return Book